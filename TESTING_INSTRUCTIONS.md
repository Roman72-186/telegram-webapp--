# Инструкция по тестированию интеграции с WatBot

## Подготовка к тестированию

1. Убедитесь, что у вас есть доступ к аккаунту WatBot
2. Убедитесь, что вебхук правильно настроен в системе WatBot
3. Убедитесь, что контакт с соответствующим telegram_id существует в WatBot (пользователь должен был написать боту команду /start)

## Тестирование интеграции

1. Откройте веб-приложение через Telegram бота
2. Заполните форму регистрации с корректными данными:
   - Имя (не менее 2 символов)
   - Фамилия (не менее 2 символов)
   - Номер телефона в формате +7 (XXX) XXX-XX-XX
   - Поставьте все необходимые галочки
3. Нажмите кнопку "Отправить"
4. После успешной отправки форма должна скрыться, и появиться сообщение об успехе
5. Проверьте в WatBot, что данные были получены корректно

## Проверка результата в WatBot

1. Войдите в ваш аккаунт WatBot
2. Найдите контакт с соответствующим telegram_id
3. Проверьте, что переменные были установлены корректно:
   - customer_name
   - customer_phone
   - telegram_user_name
   - telegram_id
   - first_name
   - last_name
   - и другие переменные, указанные в интеграции

## Возможные ошибки и решения

1. Если данные не доходят до WatBot:
   - Проверьте, что контакт с telegram_id существует в WatBot
   - Проверьте, что вебхук правильно скопирован и настроен
   - Проверьте логи сервера на предмет ошибок

2. Если форма не отправляется:
   - Проверьте консоль браузера на предмет ошибок JavaScript
   - Убедитесь, что все поля формы заполнены корректно
   - Проверьте, что все обязательные галочки проставлены

## Тестирование в режиме разработки

Если вам нужно протестировать интеграцию без фактического запуска в Telegram:

1. Можно использовать инструменты разработчика в браузере
2. Имитировать объект Telegram.WebApp с тестовыми данными
3. Отправить тестовый запрос на /api/submit с корректными параметрами